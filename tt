#!/usr/bin
var bed12_sample="chr1	1000	2000	gene1	0	+	1000	2000	0	2	 100,200	0,800\
chr1	1500	3000	gene1	0	+	1000	2000	0	3	 100	200,1000	0,200,500";

var bed12_headers=['chrom','start','end','name','score','strand',
	'thickStart','thickEnd','itemRgb','blockCount','blockSizes','blockStarts'];

function bedToJSON(tsv){
	var lines=tsv.split("\n");
	var result = [];
	var headers=lines[0].split("\t");
	// add a header
	for(var i=0;i<headers.length;i++){
		headers[i]=bed12_headers[i];
	}
	// convert to JSON
	for(var i=0;i<lines.length;i++){
		var obj = {};
		var currentline=lines[i].split("\t");
		for(var j=0;j<headers.length;j++){
			obj[headers[j]] = currentline[j];
		}
		result.push(obj);
	}
	//return result; //JavaScript object
	return JSON.stringify(result); //JSON
}

console.log(bedToJSON(bed12_sample));
